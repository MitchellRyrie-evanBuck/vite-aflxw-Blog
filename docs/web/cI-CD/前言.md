# CI/CD?

## CI/CD概念

CI/CD 是持续集成（Continuous Integration，CI）、持续交付（Continuous Delivery，CD）与持续部署（Continuous Deployment，CD）的简称，注意CD对应了两个名词

CI/CD是实现敏捷开发和Devops理念的一种方法，具体而言，CI/CD 可让持续自动化和持续监控贯穿于应用的整个生命周期（从集成和测试，到交付和部署）。这些关联的事务通常被统称为CI/CD 管道（Pipeline），由开发（RD）、测试（QA）、运维（OP）团队以敏捷方式协同支持

### 持续集成（Continuous integration，CI）

通俗的来讲，持续集成就是在开发写完代码后，提交代码准入后自动触发的一系列流程，主要包括：

- 代码编译
- 代码打包
- 单元测试
- 代码静态扫描分析
- UI、接口自动化测试
- 持续集成（CI）可以帮助开发人员更加频繁地（有时甚至每天）将代码更改合并到共享分支或"主干"（master分支）中，另外通过持续集成当中的单元测试、代码扫描、自动化测试我们可以尽早发现新提交的代码引入的问题，从而更加快速修复这些错误

### 持续交付（Continuous Delivery，CD）

完成以上CI的流程后，持续交付可自动将已验证的代码发布到存储代码库。为了实现高效的持续交付流程，务必要确保 CI 已内置于开发管道。持续交付的目标是拥有一个可随时部署到生产环境的代码库
在持续交付中，每个阶段（从代码更改的合并，到生产就绪型构建版本的交付）都涉及测试自动化和代码发布自动化。在流程结束时，运维团队可以快速、轻松地将应用部署到生产环境中
注意，持续交付在自动化测试和集成结束后，具备部署的能力，但不会自动部署，而是手动部署。如果有自动部署，则是持续部署的概念了

### 持续部署（Continuous Deployment，CD）

对于一个成熟的 CI/CD 管道来说，最后的阶段是持续部署。作为持续交付——自动将生产就绪型构建版本发布到代码存储库——的延伸，持续部署可以自动将应用发布到生产环境
由于在生产之前的管道阶段没有手动门控，因此持续部署在很大程度上都得依赖精心设计的自动化测试
持续部署当中可配置分级发布拦截，在上线部署时，对无流量、小流量机器进行自动化测试，发现问题后及时拦截回滚
实际上，持续部署意味着开发人员对应用的更改在编写后的几分钟内就能生效（假设它通过了自动化测试）。这更加便于持续接收和整合用户反馈

总而言之，所有这些 CI/CD 的关联步骤都有助于降低应用的部署风险，因此更便于以小件的方式（而非一次性）发布对应用的更改。不过，由于还需要编写自动化测试以适应 CI/CD 管道中的各种测试和发布阶段，因此前期成本会比较高

### CI/CD小结

持续集成: 高频率的将代码合入主干，在合入之前触发单测和集成测试等去验证代码的改动，确保改动不会对应用造成破坏
持续交付：将代码合入到代码仓库。其目标是拥有一个可随时部署到生产环境的代码库
持续部署：在流程结束时，运维团队可以快速、轻松地将应用部署到生产环境中
